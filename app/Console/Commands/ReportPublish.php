<?phpnamespace App\Console\Commands;use App\Mail\ReportInfo;use App\Report;use App\Template;use Illuminate\Console\Command;class ReportPublish extends Command{    /**     * The name and signature of the console command.     *     * @var string     */    protected $signature = 'report:publish {taskId}';    /**     * The console command description.     *     * @var string     */    protected $description = 'report to specified user';    /**     * Create a new command instance.     *     * @return void     */    public function __construct()    {        parent::__construct();    }    /**     * Execute the console command.     *     * @return mixed     */    public function handle()    {        // Get report instance        $taskId = $this->argument('taskId');        $report = Report::find($taskId);        // Get template instance        $templateName = $report->template;        $template = Template::where('templateName', $templateName)->get();        // Dispatch query handler        $queryHandler = resolve('query_' . $template->mode);        $fileName = $queryHandler->download();        // Send email to notify user        $notify = $report->notify;        $reportInfo = new ReportInfo();        $reportInfo->title = $report->taskName;        $reportInfo->attachFile = $fileName;        Mail::to($notify)->send($reportInfo);    }}